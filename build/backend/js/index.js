(()=>{"use strict";var e={n:t=>{var o=t&&t.__esModule?()=>t.default:()=>t;return e.d(o,{a:o}),o},d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=e=>{/comp|inter|loaded/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",e,!1)},o=function(e){(function(e){return e.is(".processing")||e.parents(".processing").length})(e)||e.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},n=function(e){e.removeClass("processing").unblock()};t((()=>{const e=document.querySelectorAll(".qlwlm-field-password");Array.from(e).forEach((e=>{e.addEventListener("click",(t=>{"password"===e.type?e.type="text":e.type="password"}))}))})),t((()=>{const e=document.querySelectorAll(".qlwlm-field-upload");Array.from(e).forEach((e=>{e.addEventListener("click",(e=>{const t=wp.media.editor.send.attachment,o=e.target;wp.media.editor.send.attachment=function(e,n){o.value=n.url,wp.media.editor.send.attachment=t},wp.media.editor.open(o)}))}))}));const c=window.jQuery;var a=e.n(c);window.window.datePicker,a()(document).on("qlwlm-field-datepicker",(function(e){a()(".qlwlm-field-datepicker").datepicker({changeMonth:!0,changeYear:!0,defaultDate:a()(this).val(),dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,onSelect(e){const t=new Date;e=e+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds(),a()(this).val(e).change()}})})),a()(document).on("ready",(function(e){a()(this).trigger("qlwlm-field-datepicker")}));const i=window.wp.i18n;function r(){const e=a()("#product-type").val();"subscription"===e||"variable-subscription"===e?a()("#woocommerce-product-data").addClass("is_qlwlm_subscription"):a()("#woocommerce-product-data").removeClass("is_qlwlm_subscription")}function s({field:e,isActive:t}){t?e.classList.add("is_qlwlm_active"):e.classList.remove("is_qlwlm_active")}a()(document).on("click",".qlwlm_delete_license",(function(e){e.preventDefault();const t=a()(this).data("license_id"),c=a()("#qlwlm_order_licenses_inner");if(t>0){if(!confirm((0,i.__)("Are you sure?","licenses-manager-for-woocommerce")))return!1;a().ajax({type:"post",url:woocommerce_admin_meta_boxes.ajax_url,data:{action:"qlwlm_delete_license",license_id:t,order_id:woocommerce_admin_meta_boxes.post_id,security:woocommerce_admin_meta_boxes.save_attributes_nonce},beforeSend(e){o(c)},complete(e){n(c)},success(e){e.success&&c.html(a()(e.data)).trigger("wc-enhanced-select-init").find(".wc-metabox-content").hide()}})}})),a()(document).on("click",".qlwlm_create_license",(function(e){e.preventDefault();const t=a()("select[name=add_product_id]").val(),c=a()("#qlwlm_order_create_inner");if(t>0){if(!confirm((0,i.__)("Are you sure?","licenses-manager-for-woocommerce")))return!1;a().ajax({type:"post",url:woocommerce_admin_meta_boxes.ajax_url,data:{action:"qlwlm_create_license",product_id:t,order_id:woocommerce_admin_meta_boxes.post_id,security:woocommerce_admin_meta_boxes.save_attributes_nonce},beforeSend(e){o(c)},complete(e){n(c)},success(e){e.success&&a()("#qlwlm_order_licenses .inside").html(a()(e.data)).trigger("wc-enhanced-select-init").trigger("qlwlm-field-datepicker").find(".wc-metabox-content").hide()}})}})),a()(document).on("change","select.qlwlm-add-license",(function(e){a()(".qlwlm_create_license").removeAttr("disabled")})),a()(document).on("click",".qlwlm_toggle_license_activation",(function(e){e.preventDefault();const t=a()(this).data("order_id"),c=a()(this).data("license_id"),r=a()(this).data("activation_instance"),s=a()(this).closest("td").find(".spinner"),l=a()("#qlwlm_order_licenses_activations_inner");if(r>0){if(!confirm((0,i.__)("Are you sure?","licenses-manager-for-woocommerce")))return!1;a().ajax({type:"post",url:woocommerce_admin_meta_boxes.ajax_url,data:{action:"qlwlm_toggle_license_activation",order_id:t,license_id:c,activation_instance:r,security:woocommerce_admin_meta_boxes.save_attributes_nonce},beforeSend(e){s.addClass("is-active"),o(l)},complete(e){s.removeClass("is-active"),n(l)},success(e){e.success&&l.html(a()(e.data)).trigger("wc-enhanced-select-init").find(".wc-metabox-content").hide()}})}})),a()(document).on("click",".qlwlm_delete_license_activation",(function(e){e.preventDefault();const t=a()(this).data("order_id"),o=a()(this).data("license_id"),n=a()(this).data("activation_instance"),c=a()(this).closest("td").find(".spinner"),r=a()(this).closest("tr");if(n>0){if(!confirm((0,i.__)("Are you sure?","licenses-manager-for-woocommerce")))return!1;a().ajax({type:"post",url:woocommerce_admin_meta_boxes.ajax_url,data:{action:"qlwlm_delete_license_activation",order_id:t,license_id:o,activation_instance:n,security:woocommerce_admin_meta_boxes.save_attributes_nonce},beforeSend(e){c.addClass("is-active")},complete(e){c.removeClass("is-active")},success(e){e.success&&r.remove()}})}})),a()(document).on("change",".qlwlm-form-field-variation-price input[type=number]",(function(e){e.preventDefault();const t=a()(e.target).attr("name").replace("[price]","[active]"),o=a()(`select[name="${t}"]`);e.target.value<=0?o.attr("disabled",!0):o.attr("disabled",!1)})),t((()=>{const e=document.getElementById("_is_qlwlm"),t=document.getElementById("product-type"),o=document.getElementById("woocommerce-product-data"),n=!!e.checked;s({field:o,isActive:n}),r(),e.addEventListener("change",(e=>{const t=!!e.target.checked;s({field:o,isActive:t})})),t.addEventListener("change",(()=>{r()}))})),t((()=>{a()("#variable_product_options").on("change",(function(e){const t=e.target,o=t?.closest(".woocommerce_variation")?.querySelector("#_is_qlwlm_variable");if(o){const e=!!o.checked,n=t?.closest(".woocommerce_variation");!function({field:e,isActive:t}){t?e.classList.add("is_qlwlm_active_variation"):e.classList.remove("is_qlwlm_active_variation")}({field:n,isActive:e})}}))})),a()(document).on("click","input[name=do_import]",(function(e){e.preventDefault(),a().ajax({type:"post",url:ajaxurl,data:{action:"qlwlm_do_import",_wpnonce:a()("input#_wpnonce").val()},beforeSend(e){a()(".wrap").css({opacity:"0.5","pointer-events":"none"})},complete(e){a()(".wrap").removeAttr("style")},success(e){a()(".wrap").removeAttr("style")}})})),a()(document).on("click","input[name=do_import_old]",(function(e){e.preventDefault(),a().ajax({type:"post",url:ajaxurl,data:{action:"qlwlm_do_import_old",_wpnonce:a()("input#_wpnonce").val()},beforeSend(e){a()(".wrap").css({opacity:"0.5","pointer-events":"none"})},complete(e){a()(".wrap").removeAttr("style")},success(e){a()(".wrap").removeAttr("style")}})})),a()(document).on("click","input[name=do_fix_expiration]",(function(e){e.preventDefault(),a().ajax({type:"post",url:ajaxurl,data:{action:"qlwlm_do_fix_expiration",_wpnonce:a()("input#_wpnonce").val()},beforeSend(e){a()(".wrap").css({opacity:"0.5","pointer-events":"none"})},complete(e){a()(".wrap").append(e),a()(".wrap").removeAttr("style")},success(e){a()(".wrap").append(e),a()(".wrap").removeAttr("style")}})}))})();